% This is an included file. See the master file for more information.
%

\section{OCR core types, macros, and error codes}
\index{OCR types, macros, and error codes}
\label{sec:OCRtypesmacros}

The OCR Application Programming Interface is defined in terms of a C language binding.
The functions comprising the OCR
API make use of a number of basic data types defined in the include file \code{ocr.h}.
The lowest level data types are defined in terms of the following C typedef statements.
\begin{itemize}
\item \code{typedef uint64\_t u64} 64-bit unsigned integer
\item \code{typedef uint32\_t u32} 32-bit unsigned integer
\item \code{typedef uint16\_t u16} 16-bit unsigned integer
\item \code{typedef uint8\_t u8} 8-bit unsigned integer
\item \code{typedef int64\_t s64} 64-bit signed integer
\item \code{typedef int32\_t s32} 32-bit signed integer
\item \code{typedef int8\_t s8} 8-bit signed integer
\item \code{typedef u8 bool} 8-bit boolean
\end{itemize}

In addition to these low level types, OCR defines a number of opaque data types
to manage OCR objects and to interact with the OCR environment:
\begin{itemize}
\item \code{ocrGuid\_t}: Type of a Globally Unique Identifier used as an opaque handle
to reference OCR objects.
\item \code{ocrEdtDep\_t}:  Type of values passed to an EDT on each pre-slot.
%
%  Is this exposed as part of the API?  Or does this belong in one of the appendices?
\item \code{ocrConfig\_t Struct}:  Reference
Data-structure containing the configuration parameters for the runtime.
\end{itemize}

The C API for OCR makes use of a set of basic macros defined
 inside \code{ocr.h}.
\begin{itemize}
\item \code{\#define true 1}
\item \code{\#define TRUE 1}
\item \code{\#define false 0}
\item \code{\#define FALSE 0}
\item \code{\#define NULL\_GUID}: A NULL ocrGuid\_t
\item \code{\#define UNINITIALIZED\_GUID}: An Unitialized GUID (ie: never set)
\item \code{\#define ERROR\_GUID}: An invalid GUID.
\end{itemize}

Most functions in the OCR API return an error code.  These are found
in the \code{ocr-errors.h} include file and are described in the following table.

\tablefirsthead{%
\hline
\textsf{\textbf{Error code}} & \textsf{\textbf{Generic Interpretation}}\\
\hline \\[-3ex]
}
\tablehead{%
\multicolumn{2}{l}{\small\sl table continued from previous page}\\
\hline
\textsf{\textbf{Error code}} & \textsf{\textbf{Generic Interpretation}}\\
\hline \\[-3ex]
}
\tabletail{%
\hline\\[-4ex]
\multicolumn{2}{l}{\small\sl table continued on next page}\\
}
\tablelasttail{\hline}
\begin{supertabular}{p{1.25in} p{2.75in}}
\label{tab:errorcodes}
\plc{OCR\_EPERM} & Operation not permitted\\
\plc{OCR\_ENOENT} & No such file or directory\\
\plc{OCR\_EINTR} & Interrupted OCR runtime call\\
\plc{OCR\_EIO} & I/O error\\
\plc{OCR\_ENXIO} & No such device or address\\
\plc{OCR\_E2BIG} & Argument list too long\\
\plc{OCR\_ENOEXEC} & Exec format error\\
\plc{OCR\_EAGAIN} & Try again\\
\plc{OCR\_ENOMEM} & Out of memory\\
\plc{OCR\_EACCES} & Permission denied\\
\plc{OCR\_EFAULT} & Bad address\\
\plc{OCR\_EBUSY} & Device or resource busy\\
\plc{OCR\_ENODEV} & No such device\\
\plc{OCR\_EINVA} &L Invalid argument\\
\plc{OCR\_ENOSPC} & No space left on device\\
\plc{OCR\_ESPIPE} & Illegal seek\\
\plc{OCR\_EROFS} & Read-only file system\\
\plc{OCR\_EDOM} & Math argument out of domain of func\\
\plc{OCR\_ERANGE} & Math result not representable\\
\plc{OCR\_ENOSYS} & Function not implemented\\
\plc{OCR\_ENOTSUP} & Function is not supported\\
\plc{OCR\_EGUIDEXISTS} & The objected referred to by GUID already exists\\
\plc{OCR\_EACQ} & Data block is already acquired\\
\plc{OCR\_EPEND} & Operation is pending\\
\plc{OCR\_ECANCELED} & Operation canceled\\
\end{supertabular}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% The OCR Main EDT
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The OCR Main EDT}
\label{sec:mainEDT}

In OCR 1.0, an OCR program always begins as a main EDT.   We need to describe the mainEDT and what a
programmer can expect when they use this point of entry.
%%%
%%% someone needs to write this section
%%%
%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Supporting Functions
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Supporting functions for OCR}
\label{sec:supportFuncs}

An OCR program needs to manage the basic execution environment; bringing external arguments into
the execution context and cleaning shutting down the program execution.  These capabilities are
handled through the following functions.

\begin{DoxyCompactItemize}
\item
void \hyperlink{group__OCRGeneral_gae115fb2dbc351416835b0fb7b91f94e5}
{ocr\-Shutdown} ()
\begin{DoxyCompactList}\small\item\em Called by an E\-D\-T to indicate the end of an O\-C\-R program. \end{DoxyCompactList}

\item
void \hyperlink{group__OCRGeneral_gabcaaebe9465cd6efcfca2acb4c399cde}
{ocr\-Abort} (\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} error\-Code)
\begin{DoxyCompactList}\small\item\em Called by an E\-D\-T to indicate an abnormal end of an O\-C\-R program. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga3f7e2bcbb0b4c338f3c4f6c937cd4234}{u64} \hyperlink{group__OCRGeneral_ga29d56cd773017a4d48d629bc13a220ce}
{get\-Argc} (void $\ast$db\-Ptr)
\begin{DoxyCompactList}\small\item\em Retrieves the traditional 'argc' value in main\-Edt. \end{DoxyCompactList}

\item
char $\ast$ \hyperlink{group__OCRGeneral_gad553929187f042ce480d09e84a4c59a7}
{get\-Argv} (void $\ast$db\-Ptr, \hyperlink{group__OCRTypesGeneral_ga3f7e2bcbb0b4c338f3c4f6c937cd4234}{u64} count)
\begin{DoxyCompactList}\small\item\em Gets the argument 'count' from the data-\/block containing the arguments. \end{DoxyCompactList}\end{DoxyCompactItemize}

In addition, OCR defines a PRINTF macro to print message to the output console.


%
% getARgc
%
\hypertarget{group__OCRGeneral_ga29d56cd773017a4d48d629bc13a220ce}{\index{Support calls for O\-C\-R@{Support calls for O\-C\-R}!get\-Argc@{get\-Argc}}
\index{get\-Argc@{get\-Argc}!Support calls for OCR@{Support calls for O\-C\-R}}
\subsection[{get\-Argc}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u64} get\-Argc (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{db\-Ptr}
\end{DoxyParamCaption}
)}}\label{group__OCRGeneral_ga29d56cd773017a4d48d629bc13a220ce}

Retrieves the traditional 'argc' value in main\-Edt.

\begin{DoxyParams}{Parameters}
{\em db\-Ptr} & Pointer to the start of the argument data block \\
\hline
\end{DoxyParams}

\returns
Number of arguments

\descr
When starting, the first E\-D\-T (called main\-Edt) gets a single data block that contains all of the
arguments passed to the program. These arguments are packed in the following format\-:
\begin{DoxyItemize}
\item first 8 bytes\-: argc
\item argc count of 8 byte values indicating the offsets from the start of the data block to the argument (ie\-: the first 8 byte value indicates the offset in bytes to the first argument)
\item the arguments (N\-U\-L\-L terminated character arrays)
\end{DoxyItemize}

This call will extract the number of arguments (argc)
%
% getArgv
%
\hypertarget{group__OCRGeneral_gad553929187f042ce480d09e84a4c59a7}{\index{Support calls for O\-C\-R@{Support calls for O\-C\-R}!get\-Argv@{get\-Argv}}
\index{get\-Argv@{get\-Argv}!Support calls for OCR@{Support calls for O\-C\-R}}
\subsection[{get\-Argv}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ get\-Argv (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{db\-Ptr, }
\item[{{\bf u64}}]{count}
\end{DoxyParamCaption}
)}}\label{group__OCRGeneral_gad553929187f042ce480d09e84a4c59a7}

Gets the argument 'count' from the data-\/block containing the arguments.

\begin{DoxyParams}{Parameters}
{\em db\-Ptr} & Pointer to the start of the argument data-\/block \\
\hline
{\em count} & Index of the argument to extract \\
\hline
\end{DoxyParams}

\returns
A N\-U\-L\-L terminated string

%%%%%
%%%%% someone needs to write this section
%%%%%
\descr
This function supports the extraction of arguments from argv.   See \hyperlink{group__OCRGeneral_ga29d56cd773017a4d48d629bc13a220ce}{get\-Argc()} for an explanation.

%
% ocrAbort
%
\hypertarget{group__OCRGeneral_gabcaaebe9465cd6efcfca2acb4c399cde}{\index{Support calls for O\-C\-R@{Support calls for O\-C\-R}!ocr\-Abort@{ocr\-Abort}}
\index{ocr\-Abort@{ocr\-Abort}!Support calls for OCR@{Support calls for O\-C\-R}}
\subsubsection[{ocr\-Abort}]{\setlength{\rightskip}{0pt plus 5cm}void ocr\-Abort (
\begin{DoxyParamCaption}
\item[{{\bf u8}}]{error\-Code}
\end{DoxyParamCaption}
)}}\label{group__OCRGeneral_gabcaaebe9465cd6efcfca2acb4c399cde}

Called by an E\-D\-T to indicate an abnormal end of an O\-C\-R program.


\begin{DoxyParams}{Parameters}
{\em error\-Code} & User defined error code returned to the environment \\
\hline
\end{DoxyParams}
\hypertarget{group__OCRGeneral_gae115fb2dbc351416835b0fb7b91f94e5}{\index{Support calls for O\-C\-R@{Support calls for O\-C\-R}!ocr\-Shutdown@{ocr\-Shutdown}}
\index{ocr\-Shutdown@{ocr\-Shutdown}!Support calls for OCR@{Support calls for O\-C\-R}}
\subsubsection[{ocr\-Shutdown}]{\setlength{\rightskip}{0pt plus 5cm}void ocr\-Shutdown (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{group__OCRGeneral_gae115fb2dbc351416835b0fb7b91f94e5}

\descr
This call will cause the O\-C\-R runtime to shutdown with an error code. Calling this with 0 as an argument is equivalent to \hyperlink{group__OCRGeneral_gae115fb2dbc351416835b0fb7b91f94e5}{ocr\-Shutdown()}.

\begin{DoxyNote}{Note}
If using the extended \hyperlink{group__OCRExtLib_ga1de1b7c273fd6fb900feba43141881f5}{ocr\-Wait()} call
present in ocr-\/legacy.\-h, you do not need to use \hyperlink{group__OCRGeneral_gae115fb2dbc351416835b0fb7b91f94e5}
{ocr\-Shutdown()} as the termination of the O\-C\-R portion will be captured in the finish E\-D\-T's return
\end{DoxyNote}

%
% PRINTF
%

\subsection{\code{PRINTF } }
\index{\code{PRINTF }}
\label{sec:PRINTF }

A macro that exposes the printf function from the standard C library.

\begin{boxedcode}
\plc{u32 PRINTF (const char fmt,...)}
\end{boxedcode}

\begin{table}[h]
\begin{tabular}{l l l}
type &  argument   & meaning \\
\hline
\code{const char}   & \code{fmt}  &in: the standard C format string associated with printf() .\\
\code{...}   & \code{....}  &in: a variable length list of arguments in agreement with \code{fmt}..\\
\hline
\end{tabular}
\end{table}

\returns
 It returns a
\code{u32} value for the number of bytes actually written.

\descr
OCR must support a wide variety of platforms including simulators that emulate real systems.
Often, core functionality provided by standard C libraries are not available on all platforms
and as a result, an OCR program cannot depend on these functions.  There was one case, however,
where it was felt support was critical.  This is in the case of the following basic printf capability which
is provide in the OCR API as following function.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Data Block Management
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{data-block management for OCR}
\index{Data Block Management APIs}
\label{sec:OCRdataBlockManagement}


Data blocks are the only form of non-\/ephemeral storage and are therefore
the only way to \char`\"{}share\char`\"{} data between E\-D\-Ts. Conceptually, data blocks
are contiguous chunks of memory that have a start address and a size. They also have the following characteristics\-:
\begin{itemize}
\item all memory within the data block is accessible from the start-\/address using an
 offset (ie\-: addresses \mbox{[}start-\/address; start-\/address+size\mbox{[} uniquely and
totally address the entire data-\/block)
\item non-\/overlapping with other distinct data blocks
\item the pointer to the start of a data block is only valid between the acquire of
the data-\/block (implicit when the E\-D\-T starts) and the corresponding ocr\-Db\-Release
 call (or the end of the E\-D\-T, whichever comes first)
\end{itemize}

The following macros and enums  are used with OCR data blocks.  QUESTION: HOW MANY OF THESE
ARE CORE API and HOW MANY BELONG IN THE IMPLEMENTATION SECTION?
\begin{itemize}
\item \code{enum ocrInDbAllocator\_t { NO\_ALLOC }}
\item \code{enum ocrDbAccessMode\_t { DB\_MODE\_CONST, DB\_MODE\_RW ,
DB\_MODE\_EW, DB\_MODE\_RO}}
\item \code{DB\_DEFAULT\_MODE ((ocrDbAccessMode\_t)DB\_MODE\_RW)}
\item \code{DB\_PROP\_NONE}
\item \code{DB\_PROP\_NO\_ACQUIRE}
\item \code{DB\_PROP\_SINGLE\_ASSIGNMENT}
\end{itemize}


These are the modes with which an EDT can access a data block. OCR currently supports four
modes:
\begin{itemize}
\item \code{DB\_MODE\_RW}  Read-Write (default mode): The EDT is stating that it may Read-from and Write-to the
data block.   The user is responsible for synchronizing between EDTs that could potentially write to
the same data block concurrently.
\item \code{DB\_MODE\_EW}  Exclusive-Write (EW): The EDT requires that it be the only one accessing the data block. The
runtime will not schedule any other EDT that accesses the same data block in EW or ITW mode
concurrently. This can limit parallelism.
\item \code{DB\_MODE\_RO}   Read-Only: The EDT is stating that it will only read from the data block.
The runtime does not gaurantee, however, that concurrent writes to the data block from other
EDTs will not be visible.
\item \code{DB\_MODE\_CONST}  Constant: The EDT is stating that it will only read from the data block. In this mode, the
runtime guarantees that the data block seen by the EDT is not modified by other concurrent
EDTs (in other words, the data block does not change "under you". Any violation of the
"no-write" contract by the program will result in undefined behavior (the write may or may not
be visible to other EDTs depending on the implementation and specific runtime conditions). \\
\end{itemize}

\subsection*{Functions}
\begin{DoxyCompactItemize}
\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{func_ocrDbCreate}
{ocr\-Db\-Create} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} $\ast$db, void $\ast$$\ast$addr, \hyperlink{group__OCRTypesGeneral_ga3f7e2bcbb0b4c338f3c4f6c937cd4234}{u64} len, \hyperlink{group__OCRTypesGeneral_gace9d960e74685e2cd84b36132dbbf8aa}{u16} flags, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} affinity, \hyperlink{group__OCRTypesDB_gabffd082fa19860aa5a9822beba6b68a5}{ocr\-In\-Db\-Allocator\-\_\-t} allocator)
\begin{DoxyCompactList}\small\item\em Request the creation of a data block. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCRDataBlock_gabc80ea5594e5e55a541a1df4c7727821}
{ocr\-Db\-Destroy} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} db)
\begin{DoxyCompactList}\small\item\em Request for the destruction of a data block. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCRDataBlock_ga2ec03c0b0998bdaf9ccc44a06fb05ca0}
{ocr\-Db\-Release} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} db)
\begin{DoxyCompactList}\small\item\em Release the D\-B (indicates that the E\-D\-T no longer needs to access it) \end{DoxyCompactList}

\end{DoxyCompactItemize}


%
%  ocdDbCreate
%
\hypertarget{func_ocrDbCreate}{\index{Data-\/block management for O\-C\-R@{Data-\/block management for O\-C\-R}!ocr\-Db\-Create@{ocr\-Db\-Create}}
\index{ocr\-Db\-Create@{ocr\-Db\-Create}!Data-block management for OCR@{Data-\/block management for O\-C\-R}}
\subsection[{ocr\-Db\-Create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Db\-Create(
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t} $\ast$}]{db, }
\item[{void $\ast$$\ast$}]{addr, }
\item[{{\bf u64}}]{len, }
\item[{{\bf u16}}]{flags, }
\item[{{\bf ocr\-Guid\-\_\-t}}]{affinity, }
\item[{{\bf ocr\-In\-Db\-Allocator\-\_\-t}}]{allocator}
\end{DoxyParamCaption}
)}}\label{func_ocrDbCreate}

Requests the runtime to create a data-block of a specified size. After
a successful call, the runtime will return the GUID for the newly
created data-block and a pointer to it (if requested).

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em db} & On successful creation, contains the GUID
of the data-block. If the call fails, the returned value is undefined \\
\hline
\mbox{\tt out}  & {\em addr} & On successful creation and if the
DB\_PROP\_NO\_ACQUIRE is not specified in {\em flags}, this call will
acquire the data-block and its address will be returned in this
parameter. If DB\_PROP\_NO\_ACQUIRE is specified in {\em flags}, the
value returned will be NULL. If the call fails, the returned value is
undefined \\
\hline
\mbox{\tt in}  & {\em len} & Size, in bytes, of the data-block to create  \\
\hline
\mbox{\tt in}  & {\em flags} & Flags controlling the behavior of the
data-block creation. The following flags are supported:
\begin{DoxyItemize}
\item DB\_PROP\_NONE: Default behavior (described in this section)
\item DB\_PROP\_NO\_ACQUIRE: The created data-block may not be used by
  this EDT (NULL will be returned in \em{addr}). Note that the actual
  data-block may be delayed until it is needed
\end{DoxyItemize}\\
\hline
\mbox{\tt in,out}  & {\em affinity} & Currently unsupported. Reserved
for future use. Parameter value should be NULL\_GUID\\
\hline
\mbox{\tt in}  & {\em allocator} & A data-block can be used as the
backing memory for malloc/free-like operations. This parameter
specifies the allocator to use for these operations inside this
data-block. Note that if an in data-block allocator is used, the user
should not write directly to the data-block as this may overwrite the
meta data used by the allocator. The 'NO\_ALLOC' allocator is used to
indicate that the data-block is not used by any allocator and is
therefore usable as POD. Supported values for this parameter are given
by \hyperlink{type_ocrInDbAllocator_t}{ocrInDbAllocator\_t}.\\
\hline
\end{DoxyParams}


\returns
A status code:
\begin{DoxyItemize}
\item 0: Successful
\item OCR\_ENOMEM: The runtime could not provide a data-block of size
  'len' due to insufficient memory
\item OCR\_EINVAL: The arguments passed (flags, allocator, etc.) were
  not valid
\item OCR\_EBUSY: A resource required for this call was busy. A retry
  is possible
\end{DoxyItemize}

%%%%
%%%%  someone needs to write a more complete description of the semantics of this function
%%%%
\descr
This function is used to create the basic unit of data in OCR: the
data-block. Unless DB\_PROP\_NO\_ACQUIRE is specified in \emph{flags}, this
function call also acquires the newly created data-block and returns a
pointer to the memory region (in \emph{addr}).

The created data-block:
\begin{DoxyItemize}
\item Will always be 8-byte aligned (ie: if \emph{addr} is returned, it
  will be 8-byte aligned);
\item Will not necessarily be zeroed out; the value of the created
  data-block is undefined;
\item Will have a GUID that is unique from this call until the user
  calls \bf{ocrDbDestroy()} on this data-block.
\end{DoxyItemize}
If a valid address is returned in \emph{addr}, it will point to the
first byte of the data-block and the user can safely read or write
to a range of length \emph{len} starting at \emph{addr} until the end of
the EDT or a call to \code{ocrDbRelease()} on this data-block, whichever
comes first.

\begin{DoxyNote}{Note}
\begin{DoxyItemize}
\item Using the DB\_PROP\_NO\_ACQUIRE flag is recommended to allow the
  runtime to make placement decisions for newly created
  data-blocks. Not specifying this flag may result in a sub-optimal
  memory placement for the created data-block.
\item When DB\_PROP\_NO\_ACQUIRE is specified, a conformant
  implementation may choose not to create the data-block immediately
  and instead create it lazily before the using EDT runs.
\item Like all GUIDs, the uniqueness of a data-block's GUID is not
  necessarily unique throughout the entire program. A data-block's
  GUID is guaranteed unique only as long as the data-block exists
  (between \code{ocrDbCreate()} and \code{ocrDbDestroy()}).
\end{DoxyItemize}
\end{DoxyNote}

%
%  ocrDbDestroy
%
\hypertarget{group__OCRDataBlock_gabc80ea5594e5e55a541a1df4c7727821}{\index{Data-\/block management for O\-C\-R@{Data-\/block management for O\-C\-R}!ocr\-Db\-Destroy@{ocr\-Db\-Destroy}}
\index{ocr\-Db\-Destroy@{ocr\-Db\-Destroy}!Data-block management for OCR@{Data-\/block management for O\-C\-R}}
\subsection[{ocr\-Db\-Destroy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Db\-Destroy (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{db}
\end{DoxyParamCaption}
)}}\label{group__OCRDataBlock_gabc80ea5594e5e55a541a1df4c7727821}

Request for the destruction of a data block.

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em db} & Data block to destroy \\
\hline
\end{DoxyParams}

\returns
a status code\-:
\begin{DoxyItemize}
\item 0\-: successful
\item E\-P\-E\-R\-M\-: db was already destroyed
\item E\-I\-N\-V\-A\-L\-: db does not refer to a valid data-\/block
\end{DoxyItemize}

\descr
The E\-D\-T does not need to have acquired the data block to destroy it.
\hyperlink{group__OCRDataBlock_gabc80ea5594e5e55a541a1df4c7727821}{ocr\-Db\-Destroy()} will
request destruction of the D\-B but the D\-B will only be destroyed once all other E\-D\-Ts that have acquired
 it release it (either implicitly at the end of the E\-D\-T or with an explicit
 \hyperlink{group__OCRDataBlock_ga2ec03c0b0998bdaf9ccc44a06fb05ca0}{ocr\-Db\-Release()} call).

\begin{DoxyNote}{Note}
If the E\-D\-T has acquired this D\-B, this call implicitly releases the D\-B.
\end{DoxyNote}
Once a data block has been marked as 'to-\/be-\/destroyed' by this call, the following operations on the same data block will result in an error\-:
\begin{DoxyItemize}
\item calling \hyperlink{group__OCRDataBlock_gabc80ea5594e5e55a541a1df4c7727821}{ocr\-Db\-Destroy()}
again (will return E\-P\-E\-R\-M) The following operations will produce undefined behavior\-:
\begin{DoxyItemize}
\item accessing the actual location of the data block (through a pointer)
\item acquiring the data block (implicit on E\-D\-T start)
\end{DoxyItemize}
\end{DoxyItemize}

%
% ocrDbRelease
%
\hypertarget{group__OCRDataBlock_ga2ec03c0b0998bdaf9ccc44a06fb05ca0}{\index{Data-\/block management for O\-C\-R@{Data-\/block management for O\-C\-R}!ocr\-Db\-Release@{ocr\-Db\-Release}}
\index{ocr\-Db\-Release@{ocr\-Db\-Release}!Data-block management for OCR@{Data-\/block management for O\-C\-R}}
\subsection[{ocr\-Db\-Release}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Db\-Release (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{db}
\end{DoxyParamCaption}
)}}\label{group__OCRDataBlock_ga2ec03c0b0998bdaf9ccc44a06fb05ca0}


Release the D\-B (indicates that the E\-D\-T no longer needs to access it)


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em db} & Data block to release\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a status code\-:
\begin{DoxyItemize}
\item 0\-: successful
\item E\-I\-N\-V\-A\-L\-: db does not refer to a valid data block
\item E\-A\-C\-C\-E\-S\-: E\-D\-T has not acquired the data block and therefore cannot release it
\end{DoxyItemize}
\end{DoxyReturn}

\descr
This call can be used to indicate an early release of the data block (ie\-: it is not needed in the rest of the E\-D\-T). Once the data block is released, pointers that were previously associated with it are invalid and should not be used to access the data.

The functionality of \hyperlink{group__OCRDataBlock_ga2ec03c0b0998bdaf9ccc44a06fb05ca0}{ocr\-Db\-Release()} is implicitly contained in\-:
\begin{DoxyItemize}
\item \hyperlink{group__OCRDataBlock_gabc80ea5594e5e55a541a1df4c7727821}{ocr\-Db\-Destroy()}
\item E\-D\-T exit
\end{DoxyItemize}

\begin{DoxyNote}{Note}
ocr\-Db\-Release should only be called {\itshape once} at most.
\end{DoxyNote}

 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Event Management
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Event Management for OCR}
\index{Event Management APIs}
\label{sec:OCReventManagement}

Events are  used to coordinate the execution of tasks and to
help establish dependences in the directed acyclic graph representing the execution of an OCR program.
%To manage the different types of events, OCR defines the following enum types and values.


Each OCR event has a type that is specified at creation.
The type of the event determines its behavior, specifically,
its persistency after it triggers its post-slot, its trigger rule and
its behavior when satisfied multiple times.

\begin{itemize}
\item \code{OCR\_EVENT\_ONCE\_T} - \emph{Once} Event: A ONCE event simply passes along a satisfaction on its
unique pre-slot to its post-slot. Once all OCR objects linked to its post-slot have been satisfied,
the ONCE event is automatically destroyed.
\item \code{OCR\_EVENT\_IDEM\_T} - \emph{Idempotent} Event: An IDEM event also passes along a satisfaction on its
unique pre-slot to its post-slot. The IDEM event persists until ocrEventDestroy() is explicitly called on it.
It can only be satisfied once and subsequent satisfactions are ignored.
\item \code{OCR\_EVENT\_STICKY\_T} - \emph{Sticky} Event: A STICKY event is identical to an IDEM event except that
multiple satisfactions result in an error.
\item \code{OCR\_EVENT\_LATCH\_T} - \emph{Latch} Event: A LATCH event has two pre-slots: a INCR and a DECR.
Each slot is associated with an internal monotonically increasing counter that starts at 0.
On each satisfaction of one of the pre-slots, the counter for that slot is incremented by 1.
When both counters are equal (and non-zero), the post-slot of the latch event is triggered.
Any data block passed along its pre-slots is ignored. A LATCH event is similarly persistent
as a ONCE event and is automatically destroyed when its post-slot is triggered.
\end{itemize}

Currently, only the LATCH event has more than one pre-slot.
\begin{itemize}
\item \code{OCR\_EVENT\_LATCH\_DECR\_SLOT} - This is the decrement slot of a LATCH event
\item \code{OCR\_EVENT\_LATCH\_INCR\_SLOT} - This is the increment slot of a LATCH event
\end{itemize}

\subsection*{Functions}
\begin{DoxyCompactItemize}
\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREvents_gab4cd41f97cc692a86f887b404b055066}
{ocr\-Event\-Create} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} $\ast$guid, \hyperlink{group__OCRTypesEvents_ga42f4195355182edfaa79c9ef3f2c07b1}{ocr\-Event\-Types\-\_\-t} event\-Type, bool takes\-Arg)
\begin{DoxyCompactList}\small\item\em Creates an event. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREvents_ga24d30531aaa059c1086fc74712d4f23d}
{ocr\-Event\-Destroy} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} guid)
\begin{DoxyCompactList}\small\item\em Explicitly destroys an event. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREvents_gab27ef5d905c01ba534e86f8e7e91eaf0}
{ocr\-Event\-Satisfy} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} event\-Guid, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} data\-Guid)
\begin{DoxyCompactList}\small\item\em Satisfy the first pre-\/slot of an event and optionally pass a data block along to the event. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREvents_gab53103ecf0c74b55830edf5b8d14a942}
{ocr\-Event\-Satisfy\-Slot} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} event\-Guid, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} data\-Guid, \hyperlink{group__OCRTypesGeneral_gafaa62991928fb9fb18ff0db62a040aba}{u32} slot)
\begin{DoxyCompactList}\small\item\em Satisfy the specified pre-\/slot of an event. \end{DoxyCompactList}
\end{DoxyCompactItemize}

%
% ocrEventCreate
%
\hypertarget{group__OCREvents_gab4cd41f97cc692a86f887b404b055066}{\index{Event Management for O\-C\-R@{Event Management for O\-C\-R}!ocr\-Event\-Create@{ocr\-Event\-Create}}
\index{ocr\-Event\-Create@{ocr\-Event\-Create}!Event Management for OCR@{Event Management for O\-C\-R}}
\subsection[{ocr\-Event\-Create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Event\-Create (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t} $\ast$}]{guid, }
\item[{{\bf ocr\-Event\-Types\-\_\-t}}]{event\-Type, }
\item[{u16}]{properties}
\end{DoxyParamCaption}
)}}\label{group__OCREvents_gab4cd41f97cc692a86f887b404b055066}

Creates an event.

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em guid} & The G\-U\-I\-D created by the runtime for the new event \\
\hline
\mbox{\tt in}  & {\em event\-Type} & The type of event to create. See \hyperlink{group__OCRTypesEvents_ga42f4195355182edfaa79c9ef3f2c07b1}{ocr\-Event\-Types\-\_\-t} \\
\hline
\mbox{\tt in}  & {\em properties} & Properties used to create the event. Currently, the following properties are supported\-:
\begin{DoxyItemize}
\item {E\-V\-T\-\_\-\-P\-R\-O\-P\-\_\-\-N\-O\-N\-E}, indicates no specific properties
\item {E\-V\-T\-\_\-\-P\-R\-O\-P\-\_\-\-T\-A\-K\-E\-S\-\_\-\-A\-R\-G}, if this event will potentially carry a data block on satisfaction.
\end{DoxyItemize}\\
\hline
\end{DoxyParams}

\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\item E\-N\-O\-M\-E\-M\-: If space cannot be found to allocate the event
\item E\-I\-N\-V\-A\-L\-: If event\-Type was malformed or is incompatible with takes\-Arg
\end{DoxyItemize}

%%%%
%%%%  Someone needs to write a proper description of this function.
%%%%
\descr
This function creates a new programmer-\/managed event identified by the returned G\-U\-I\-D.

%
% ocrEventDestroy
%
\hypertarget{group__OCREvents_ga24d30531aaa059c1086fc74712d4f23d}{\index{Event Management for O\-C\-R@{Event Management for O\-C\-R}!ocr\-Event\-Destroy@{ocr\-Event\-Destroy}}
\index{ocr\-Event\-Destroy@{ocr\-Event\-Destroy}!Event Management for OCR@{Event Management for O\-C\-R}}
\subsection[{ocr\-Event\-Destroy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Event\-Destroy (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{guid}
\end{DoxyParamCaption}
)}}\label{group__OCREvents_ga24d30531aaa059c1086fc74712d4f23d}

Explicitly destroys an event.

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em guid} & The G\-U\-I\-D of the event to destroy \\
\hline
\end{DoxyParams}

\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\item E\-I\-N\-V\-A\-L\-: If guid does not refer to a valid event to destroy
\end{DoxyItemize}

%%%%
%%%%  Someone needs to write a proper description of this function
%%%%
\descr
Events such as O\-N\-C\-E or L\-A\-T\-C\-H are automatically destroyed by the runtime once they trigger;
others, however, need to be explicitly destroyed by the programmer using this call.

%
% ocrEventSatisfy
%
\hypertarget{group__OCREvents_gab27ef5d905c01ba534e86f8e7e91eaf0}{\index{Event Management for O\-C\-R@{Event Management for O\-C\-R}!ocr\-Event\-Satisfy@{ocr\-Event\-Satisfy}}
\index{ocr\-Event\-Satisfy@{ocr\-Event\-Satisfy}!Event Management for OCR@{Event Management for O\-C\-R}}
\subsection[{ocr\-Event\-Satisfy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Event\-Satisfy (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{event\-Guid, }
\item[{{\bf ocr\-Guid\-\_\-t}}]{data\-Guid}
\end{DoxyParamCaption}
)}}\label{group__OCREvents_gab27ef5d905c01ba534e86f8e7e91eaf0}

Satisfy the first pre-\/slot of an event and optionally pass a data block along to the event.



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em event\-Guid} & G\-U\-I\-D of the event to satisfy \\
\hline
\mbox{\tt in}  & {\em data\-Guid} & G\-U\-I\-D of the data block to pass along or N\-U\-L\-L\-\_\-\-G\-U\-I\-D\\
\hline
\end{DoxyParams}


\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\item E\-N\-O\-M\-E\-M\-: If there is not enough memory. This is usually caused by a programmer error
\item E\-I\-N\-V\-A\-L\-: If the G\-U\-I\-Ds do not refer to valid events/data blocks
\item E\-N\-O\-P\-E\-R\-M\-: If the event has already been satisfied or if the event does not take an argument and one is given or if the event takes an argument and none is given
\end{DoxyItemize}


\descr
Satisfying the pre-\/slot of an event will potentially trigger the satisfaction of its post-\/slot depending on its trigger rule\-:
\begin{DoxyItemize}
\item O\-N\-C\-E, I\-D\-E\-M and S\-T\-I\-C\-K\-Y events will satisfy their post-\/slot upon satisfaction of their pre-\/slot
\item L\-A\-T\-C\-H events have a more complex rule;
see \hyperlink{group__OCRTypesEvents_ga42f4195355182edfaa79c9ef3f2c07b1}{ocr\-Event\-Types\-\_\-t}.
\end{DoxyItemize}

During satisfaction, the programmer may associate a data block to the pre-\/slot of the event. Depending
on the event type, that data block will be passed along to its post-\/slot\-:
\begin{DoxyItemize}
\item O\-N\-C\-E, I\-D\-E\-M and S\-T\-I\-C\-K\-Y events will pass along the data block to their post-\/slot
\item L\-A\-T\-C\-H events ignore any data block passed
\end{DoxyItemize}
An event satisfaction without the optional data block can be viewed as a pure control dependence
whereas one with a data block is a control+data dependence

\begin{DoxyNote}{Note}
On satisfaction, a O\-N\-C\-E event will pass the G\-U\-I\-D of the optionally attached data
block to all O\-C\-R objects waiting on it at that time and the event will destroy itself. I\-D\-E\-M and S\-T\-I\-C\-K\-Y
events will pass the G\-U\-I\-D of the optionally attached data block to all O\-C\-R objects waiting on it at that time as
well as any new objects linked to it until the event is destroyed.
\end{DoxyNote}

%
% ocrEventSatisfySlot
%
\hypertarget{group__OCREvents_gab53103ecf0c74b55830edf5b8d14a942}{\index{Event Management for O\-C\-R@{Event Management for O\-C\-R}!ocr\-Event\-Satisfy\-Slot@{ocr\-Event\-Satisfy\-Slot}}
\index{ocr\-Event\-Satisfy\-Slot@{ocr\-Event\-Satisfy\-Slot}!Event Management for OCR@{Event Management for O\-C\-R}}
\subsection[{ocr\-Event\-Satisfy\-Slot}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Event\-Satisfy\-Slot (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{event\-Guid, }
\item[{{\bf ocr\-Guid\-\_\-t}}]{data\-Guid, }
\item[{{\bf u32}}]{slot}
\end{DoxyParamCaption}
)}}\label{group__OCREvents_gab53103ecf0c74b55830edf5b8d14a942}


Satisfy the specified pre-\/slot of an event.

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em event\-Guid} & G\-U\-I\-D of the event to satisfy \\
\hline
\mbox{\tt in}  & {\em data\-Guid} & G\-U\-I\-D of the data block to pass along or N\-U\-L\-L\-\_\-\-G\-U\-I\-D \\
\hline
\mbox{\tt in}  & {\em slot} & Pre-\/slot on the destination event to satisfy\\
\hline
\end{DoxyParams}


\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\item E\-N\-O\-M\-E\-M\-: If there is not enough memory. This is usually caused by a programmer error
\item E\-I\-N\-V\-A\-L\-: If the G\-U\-I\-Ds do not refer to valid events/data blocks
\item E\-N\-O\-P\-E\-R\-M\-: If the event has already been satisfied or if the event does not take an
argument and one is given or if the event takes an argument and none is given
\end{DoxyItemize}

\descr
This call is used primarily for L\-A\-T\-C\-H events. ocr\-Event\-Satisfy\-Slot(event\-Guid, data\-Guid, 0) is
equivalent to ocr\-Event\-Satisfy(event\-Guid, data\-Guid)

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__OCREvents_gab27ef5d905c01ba534e86f8e7e91eaf0}{ocr\-Event\-Satisfy()}
\end{DoxySeeAlso}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% EDT API
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\hypertarget{group__OCREDT}{\section{Event Driven Task A\-P\-I}
\label{group__OCREDT}\index{Event Driven Task A\-P\-I@{Event Driven Task A\-P\-I}}
}


A\-P\-Is to manage E\-D\-Ts in O\-C\-R.
Types, constants and basic macros associated with EDTs
\begin{itemize}
\item \#define EDT\_PROP\_NONE
\item \#define EDT\_PROP\_FINISH
\item \#define EDT\_PARAM\_UNK: Constant indicating that the number of parameters or dependences to an EDT or EDT template is
unknown.
\item \#define EDT\_PARAM\_DEF: Constant indicating that the number of parameters or dependences to an EDT is the same as the one
specified in its template.
\end{itemize}

The EDT API itself is defined in terms of the following macro and set of functions.
\begin{DoxyCompactItemize}
\item
\#define \hyperlink{group__OCREDT_ga9649098ffad669c1c820cd821792d67a}
{ocr\-Edt\-Template\-Create}(guid, func\-Ptr, paramc, depc)~\hyperlink{group__OCREDT_gaa481a8e8f1a2af9aba623cb01b01bc1b}
{ocr\-Edt\-Template\-Create\-\_\-internal}((guid), (func\-Ptr), (paramc), (depc), N\-U\-L\-L)
\begin{DoxyCompactList}\small\item\em Creates an E\-D\-T template. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREDT_gace7063cfee522df47c64bf5013385c10}
{ocr\-Edt\-Template\-Destroy} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} guid)
\begin{DoxyCompactList}\small\item\em Destroy an E\-D\-T template. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREDT_gafa2443b31c38b4b7f9f59713abe12ecc}
{ocr\-Edt\-Create} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} $\ast$guid, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} template\-Guid, \hyperlink{group__OCRTypesGeneral_gafaa62991928fb9fb18ff0db62a040aba}{u32} paramc, \hyperlink{group__OCRTypesGeneral_ga3f7e2bcbb0b4c338f3c4f6c937cd4234}{u64} $\ast$paramv, \hyperlink{group__OCRTypesGeneral_gafaa62991928fb9fb18ff0db62a040aba}{u32} depc, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} $\ast$depv, \hyperlink{group__OCRTypesGeneral_gace9d960e74685e2cd84b36132dbbf8aa}{u16} properties, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} affinity, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} $\ast$output\-Event)
\begin{DoxyCompactList}\small\item\em Creates an E\-D\-T instance from an E\-D\-T template. \end{DoxyCompactList}

\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCREDT_gae258a29af116794a73099e9c6d9232f8}
{ocr\-Edt\-Destroy} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} guid)
\begin{DoxyCompactList}\small\item\em Destroy an E\-D\-T. \end{DoxyCompactList}

\end{DoxyCompactItemize}


%
% ocrEdtTemplateCreate (macro)
%
\index{Event Driven Task A\-P\-I@{Event Driven Task A\-P\-I}!ocr\-Edt\-Template\-Create@{ocr\-Edt\-Template\-Create}}
\index{ocr\-Edt\-Template\-Create@{ocr\-Edt\-Template\-Create}!Event Driven Task API@{Event Driven Task A\-P\-I}}
\subsection[{ocr\-Edt\-Template\-Create}]{\setlength{\rightskip}{0pt plus 5cm}\#define ocr\-Edt\-Template\-Create(
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t} $\ast$}]{guid, }
\item[{{\bf ocr\-Edt\-\_\-t}}]{func\-Ptr, }
\item[{{\bf u32}}]{paramc, }
\item[{{\bf u32}}]{depc, }
\end{DoxyParamCaption})~}


Creates an E\-D\-T template.




\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em guid} & Runtime created G\-U\-I\-D for the newly created E\-D\-T Template \\
\hline
\mbox{\tt in}  & {\em func\-Ptr} & E\-D\-T function. This function must be of type \hyperlink{group__OCRTypesEDT_ga6d853145262e968a06fbe8a6799bef64}{ocr\-Edt\-\_\-t}. \\
\hline
\mbox{\tt in}  & {\em paramc} & Number of parameters that the E\-D\-Ts will take. If not known or variable, this can be E\-D\-T\-\_\-\-P\-A\-R\-A\-M\-\_\-\-U\-N\-K \\
\hline
\mbox{\tt in}  & {\em depc} & Number of pre-\/slots that the E\-D\-Ts will have. If not known or variable, this can be E\-D\-T\-\_\-\-P\-A\-R\-A\-M\-\_\-\-U\-N\-K \\

\hline
\end{DoxyParams}


\returns
a status code\-:
\begin{DoxyItemize}
\item 0\-: successful
\item E\-N\-O\-M\-E\-M\-: No memory available to allocate the template
\end{DoxyItemize}


\descr
An E\-D\-T template encapsulates the E\-D\-T function and, optionally, the number of
parameters and arguments that E\-D\-Ts instantiated from this template will use. It needs to
be created only once for each function that will serve as an E\-D\-T; reusing the same
template from multiple E\-D\-Ts of the same type may improve performance as this
allows the runtime to collect information about multiple instances of the same
type of E\-D\-T.

\begin{DoxyNote}{Note}
You should use \hyperlink{group__OCREDT_ga9649098ffad669c1c820cd821792d67a}{ocr\-Edt\-Template\-Create()} as opposed to the
internal function referenced by this macro. If O\-C\-R\-\_\-\-E\-N\-A\-B\-L\-E\-\_\-\-E\-D\-T\-\_\-\-N\-A\-M\-I\-N\-G is enabled,
the C name of the function will be used as func\-Name.
\end{DoxyNote}


%
% ocrEdtCreate
%
\hypertarget{group__OCREDT_gafa2443b31c38b4b7f9f59713abe12ecc}{\index{Event Driven Task A\-P\-I@{Event Driven Task A\-P\-I}!ocr\-Edt\-Create@{ocr\-Edt\-Create}}
\index{ocr\-Edt\-Create@{ocr\-Edt\-Create}!Event Driven Task API@{Event Driven Task A\-P\-I}}
\subsection[{ocr\-Edt\-Create}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Edt\-Create (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t} $\ast$}]{guid, }
\item[{{\bf ocr\-Guid\-\_\-t}}]{template\-Guid, }
\item[{{\bf u32}}]{paramc, }
\item[{{\bf u64} $\ast$}]{paramv, }
\item[{{\bf u32}}]{depc, }
\item[{{\bf ocr\-Guid\-\_\-t} $\ast$}]{depv, }
\item[{{\bf u16}}]{properties, }
\item[{{\bf ocr\-Guid\-\_\-t}}]{affinity, }
\item[{{\bf ocr\-Guid\-\_\-t} $\ast$}]{output\-Event}
\end{DoxyParamCaption}
)}}\label{group__OCREDT_gafa2443b31c38b4b7f9f59713abe12ecc}


Creates an E\-D\-T instance from an E\-D\-T template.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em guid} & G\-U\-I\-D of the newly created E\-D\-T type \\
\hline
\mbox{\tt in}  & {\em template\-Guid} & G\-U\-I\-D of the template to use to create this E\-D\-T \\
\hline
\mbox{\tt in}  & {\em paramc} & Number of parameters (64-\/bit values). Set to \hyperlink{group__OCRTypesEDT_gaefeb8d48e96e11daf99edf909921ff3d}{E\-D\-T\-\_\-\-P\-A\-R\-A\-M\-\_\-\-D\-E\-F} if you want to use the 'paramc' value specified at the time of the E\-D\-T template's creation \\
\hline
\mbox{\tt in}  & {\em paramv} & 64-\/bit values for the parameters. This must be an array of paramc 64-\/bit values. These values are copied in. If paramc is 0, this must be N\-U\-L\-L. \\
\hline
\mbox{\tt in}  & {\em depc} & Number of dependences for this E\-D\-T. Set to \hyperlink{group__OCRTypesEDT_gaefeb8d48e96e11daf99edf909921ff3d}{E\-D\-T\-\_\-\-P\-A\-R\-A\-M\-\_\-\-D\-E\-F} if you want to use the 'depc' value specified at the time of the E\-D\-T template's creation \\
\hline
\mbox{\tt in}  & {\em depv} & Values for the G\-U\-I\-Ds of the dependences (if known). Note that all dependences added by this method will be in the \hyperlink{group__OCRTypesDB_ga305e2c2c25da246a1ba54b8f4d1dbacb}{D\-B\-\_\-\-D\-E\-F\-A\-U\-L\-T\-\_\-\-M\-O\-D\-E}. Use \hyperlink{group__OCRDependences_gab0eea439797c1dcde2dbbe704d701dcd}{ocr\-Add\-Dependence()} to add unknown dependences or dependences with another mode. This pointer should either be N\-U\-L\-L or point to an array of size 'depc'. \\
\hline
\mbox{\tt in}  & {\em properties} & Used to indicate if this is a finish E\-D\-T (see \hyperlink{group__OCRTypesEDT_ga043f0aab623cbc9db6fa90a0b7ad876a}{E\-D\-T\-\_\-\-P\-R\-O\-P\-\_\-\-F\-I\-N\-I\-S\-H}). Use \hyperlink{group__OCRTypesEDT_gae9f46354fe64d7a4b245fc23dfde5660}{E\-D\-T\-\_\-\-P\-R\-O\-P\-\_\-\-N\-O\-N\-E} as a default value. \\
\hline
\mbox{\tt in}  & {\em affinity} & Affinity container for this E\-D\-T. Can be N\-U\-L\-L\-\_\-\-G\-U\-I\-D. This is currently an experimental feature \\
\hline
\mbox{\tt in,out}  & {\em output\-Event} & If not N\-U\-L\-L on input, on successful return of this call, this will return the G\-U\-I\-D of the event associated with the post-\/slot of the E\-D\-T. For a F\-I\-N\-I\-S\-H E\-D\-T, the post-\/slot of this event will be satisfied when the E\-D\-T and all of the child E\-D\-Ts have completed execution. For a non F\-I\-N\-I\-S\-H E\-D\-T, the post-\/slot of this event will be satisfied when the E\-D\-T completes execution and will carry the data block returned by the E\-D\-T. If N\-U\-L\-L, no event will be associated with the E\-D\-T's post-\/slot\\
\hline
\end{DoxyParams}


\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\end{DoxyItemize}

%%%%
%%%%  Someone needs to write a description of this function
%%%%
\descr
This function does something very important

%
% ocrEdtDestroy
%
\hypertarget{group__OCREDT_gae258a29af116794a73099e9c6d9232f8}{\index{Event Driven Task A\-P\-I@{Event Driven Task A\-P\-I}!ocr\-Edt\-Destroy@{ocr\-Edt\-Destroy}}
\index{ocr\-Edt\-Destroy@{ocr\-Edt\-Destroy}!Event Driven Task API@{Event Driven Task A\-P\-I}}
\subsection[{ocr\-Edt\-Destroy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Edt\-Destroy (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{guid}
\end{DoxyParamCaption}
)}}\label{group__OCREDT_gae258a29af116794a73099e9c6d9232f8}

Destroy an E\-D\-T.

E\-D\-Ts are normally destroyed after they execute. This call is provided if an E\-D\-T is created and the programmer later realizes that it will never become runable.

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em guid} & G\-U\-I\-D of the E\-D\-T to destroy\\
\hline
\end{DoxyParams}


\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\end{DoxyItemize}

%%%%%%%
%%%%%%%  Someone needs to write a description of this function
%%%%%%%

%
%  ocrEdtTemplateDestroy
%
\hypertarget{group__OCREDT_gace7063cfee522df47c64bf5013385c10}{\index{Event Driven Task A\-P\-I@{Event Driven Task A\-P\-I}!ocr\-Edt\-Template\-Destroy@{ocr\-Edt\-Template\-Destroy}}
\index{ocr\-Edt\-Template\-Destroy@{ocr\-Edt\-Template\-Destroy}!Event Driven Task API@{Event Driven Task A\-P\-I}}
\subsection[{ocr\-Edt\-Template\-Destroy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Edt\-Template\-Destroy (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{guid}
\end{DoxyParamCaption}
)}}\label{group__OCREDT_gace7063cfee522df47c64bf5013385c10}


Destroy an E\-D\-T template.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em guid} & G\-U\-I\-D of the E\-D\-T template to destroy \\
\hline
\end{DoxyParams}

\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\end{DoxyItemize}

\descr
This function can be called if no further E\-D\-Ts will be created based on this template


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% OCR Dependences
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\hypertarget{group__OCRDependences}{\section{O\-C\-R dependence A\-P\-Is}
\label{group__OCRDependences}\index{O\-C\-R dependence A\-P\-Is@{O\-C\-R dependence A\-P\-Is}}
}

At the core of OCR is the concept of a directed acyclic graph that represents the evolving
state of an OCR program.   OCR objects become runnable once their dependences are met.
These dependences can be set explicitly when creating the OCR object or dynamically using the functions
from this section of the API.


\begin{DoxyCompactItemize}
\item
\hyperlink{group__OCRTypesGeneral_ga92c50087ca0e64fa93fc59402c55f8ca}{u8} \hyperlink{group__OCRDependences_gab0eea439797c1dcde2dbbe704d701dcd}
{ocr\-Add\-Dependence} (\hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} source, \hyperlink{group__OCRTypesGeneral_gacde3883d1ce245c051133c2c3aa82fc8}{ocr\-Guid\-\_\-t} destination, \hyperlink{group__OCRTypesGeneral_gafaa62991928fb9fb18ff0db62a040aba}{u32} slot, \hyperlink{group__OCRTypesDB_gae72c588a0182fcee7db295e53743821a}{ocr\-Db\-Access\-Mode\-\_\-t} mode)
\begin{DoxyCompactList}\small\item\em Adds a dependence between O\-C\-R objects\-: \end{DoxyCompactList}
\end{DoxyCompactItemize}

%
%  OcrAddDependence
%
\hypertarget{group__OCRDependences_gab0eea439797c1dcde2dbbe704d701dcd}{\index{O\-C\-R dependence A\-P\-Is@{O\-C\-R dependence A\-P\-Is}!ocr\-Add\-Dependence@{ocr\-Add\-Dependence}}
\index{ocr\-Add\-Dependence@{ocr\-Add\-Dependence}!OCR dependence APIs@{O\-C\-R dependence A\-P\-Is}}
\subsection[{ocr\-Add\-Dependence}]{\setlength{\rightskip}{0pt plus 5cm}{\bf u8} ocr\-Add\-Dependence (
\begin{DoxyParamCaption}
\item[{{\bf ocr\-Guid\-\_\-t}}]{source, }
\item[{{\bf ocr\-Guid\-\_\-t}}]{destination, }
\item[{{\bf u32}}]{slot, }
\item[{{\bf ocr\-Db\-Access\-Mode\-\_\-t}}]{mode}
\end{DoxyParamCaption}
)}}\label{group__OCRDependences_gab0eea439797c1dcde2dbbe704d701dcd}


Adds a dependence between O\-C\-R objects.



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em source} & G\-U\-I\-D of the source \\
\hline
\mbox{\tt in}  & {\em destination} & G\-U\-I\-D of the destination \\
\hline
\mbox{\tt in}  & {\em slot} & Index of the pre-\/slot on the destination O\-C\-R object \\
\hline
\mbox{\tt in}  & {\em mode} & Access mode of the destination for the data block. See \hyperlink{group__OCRTypesDB_gae72c588a0182fcee7db295e53743821a}{ocr\-Db\-Access\-Mode\-\_\-t}.\\
\hline
\end{DoxyParams}

\returns
a status code
\begin{DoxyItemize}
\item 0\-: successful
\item E\-I\-N\-V\-A\-L\-: The slot number is invalid
\item E\-N\-O\-P\-E\-R\-M\-: The source and destination G\-U\-I\-Ds cannot be linked with a dependence
\end{DoxyItemize}


\descr
The following dependences can be added\-:
\begin{DoxyItemize}
\item Event to Event\-: The sink event's pre-\/slot will become satisfied upon satisfaction of the source event's post-\/slot. Any data block associated with the source event's post-\/slot will be associated with the sink event's pres-\/slot.
\item Event to E\-D\-T \-: Upon satisfaction of the source event's post-\/slot, the pre-\/slot of the E\-D\-T will be satisfied. When the E\-D\-T runs, the data block associated with the post-\/slot of the event will be passed in through the \code{depv} array. This represents a control or a control+data dependence.
\item D\-B to Event \-: ocr\-Add\-Dependence(db, evt, slot) is equivalent to ocr\-Satisfy\-Slot(evt, db, slot)
\item D\-B to E\-D\-T \-: This represents a pure data dependence. Adding a dependence between a data block and an E\-D\-T immediately satisfies the pre-\/slot of the E\-D\-T. When the E\-D\-T runs, the data block will be passed in through the \code{depv} array.
\end{DoxyItemize}


% This is the end of ch2-ocrAPI.tex of the OCR specification.
